---
создал заметку: 2024-08-21
---

---

### Состояния потока в Java

В Java поток может находиться в нескольких состояниях в течение своего жизненного цикла. Вот основные состояния:

1. **New (Новый)**
   - Поток создаётся, но ещё не запущен. Он находится в этом состоянии после создания объекта `Thread` и до вызова метода `start()`.
   - **Пример:**
     ```java
     Thread thread = new Thread(); // Поток в состоянии New
     ```

2. **Runnable (Готовый к выполнению)**
   - Поток переходит в это состояние после вызова метода `start()`. В этом состоянии он может находиться в двух под-состояниях:
     - **Ready (Готовый):** Поток готов к выполнению, но ещё не запущен. Он ждёт, когда операционная система выделит ему процессорное время. Это ожидание связано с тем, что в системе может быть много потоков, и они распределяются по очереди.
     - **Running (Выполняющийся):** Поток активно выполняется на процессоре. ОС запустила его, и он выполняет свои задачи.
   - **Пример:**
     ```java
     thread.start(); // Поток переходит в состояние Runnable
     ```

3. **Blocked (Заблокированный)**
   - Поток может временно перейти в состояние блокировки, если он ожидает освобождения ресурса (например, блокировки на объекте) или завершения другой задачи. В этом состоянии поток не может выполняться до тех пор, пока не будет разблокирован.

4. **Waiting (Ожидающий)**
   - Поток переходит в это состояние, если он ожидает завершения другого потока или события (например, вызов метода `join()` или ожидание уведомления через `wait()`). Поток в этом состоянии не будет выполняться до тех пор, пока не получит сигнал для продолжения.

5. **Timed Waiting (Ожидание с тайм-аутом)**
   - Это особый вид состояния ожидания, где поток ожидает в течение определённого времени (например, с помощью метода `sleep(milliseconds)` или `join(milliseconds)`). Если время ожидания истекает, поток автоматически переходит в состояние `Runnable`.

6. **Terminated (Завершённый)**
   - Поток завершает своё выполнение и переходит в это состояние. Это может произойти либо после завершения метода `run()`, либо из-за необработанного исключения, которое прерывает поток.
   - **Пример:**
     ```java
     // После завершения выполнения thread.run() поток становится Terminated
     ```

---

### Визуализация жизненного цикла потока

```
[New] --> [Runnable (Ready)] --> [Running] --> [Terminated]
                  ^                |
                  |                |
            [Blocked] <----------> [Waiting / Timed Waiting]
```

### Обзор состояний

1. **New (Новый):** Поток создан, но ещё не запущен.
2. **Runnable (Готовый к выполнению):** Поток готов к выполнению или выполняется.
3. **Blocked (Заблокированный):** Поток ожидает освобождения ресурса.
4. **Waiting (Ожидающий):** Поток ожидает завершения другого потока или события.
5. **Timed Waiting (Ожидание с тайм-аутом):** Поток ожидает с ограничением по времени.
6. **Terminated (Завершённый):** Поток завершил своё выполнение.

---

### Дополнительно

- Состояние `Runnable` включает в себя под-состояния `Ready` и `Running`, что означает, что поток либо готов к выполнению, либо уже выполняется.
- Потоки в состоянии `Blocked`, `Waiting` и `Timed Waiting` не могут выполняться, пока не произойдёт разблокировка или не истечёт время ожидания.

---
## Важный момент

- Нужно быть внимательным, с выводом состояния: thread.getState();
  Потому что пока мы выводит состояние поток может уже перейти в другое и информация больше не будет актуальной. 
- Это может возникнуть, если потому очень быстрый