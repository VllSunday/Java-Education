---
создал заметку: 2024-08-24
---
Когда нам необходимо запускать поток, или несколько потоков из ThereadPool-a по какому то расписанию то тогда нужно использовать ScheduledExecutorService

==ScheduledExecutorService== мы используем тогда, когда
хотим установить расписание на запуск потоков из пула.
\

Данный pool создается, использую factory метод класса Executers: 
```java
ScheduledExecutorService service = Executors.newScheduledThreadPool(5);
```

### Методы

- schedule
- scheduleAtFixedRate
- scheduleWithFixedDelay



 scheduleAtFixedRate - планирует задачу(new RunnableIml100()) для переодического выполнения
```java
service.scheduleAtFixedRate(new RunnableIml100(), 3, 1 ,TimeUnit.SECONDS);
```

Впервые эта задача обработает через 3 секунды после запуска метода, и потом будет выполняться с периодичностью в 1 секунду 

Метод ==scheduleAtFixedRate== позволяет выполнять периодически задачу несколько раз.
Но есть сразу после этого метода вызвать метод shutdown(). То задача выполниться всего лишь 1 раз. Потому что метод shutdown() "говорит" что больше задач мы не принимаем  

Нужно немного подробнее рассказать про парамент period(1)

### Как он работает

![[Pasted image 20240824133518.png]]
- Period это отрезок времени от начала выполнения: предыдущего задания и до начала последующего

#### Но что будет если задание не успеет выполниться? 
То есть если задание будет длиться больше времени чем указанно в периоде? 

![[Pasted image 20240824133909.png]]
- Если задание будет длиться больше чем написано в периоде, то между заданиями пропадет задержка при выполнении. То есть если заданий 1 закончилось то задание 2 начнется сразу же 


### scheduleWithFixedDelay

Выглядит этот метод вот так: 
```java
service.scheduleWithFixedDelay(new RunnableIml100(), 3, 1 ,TimeUnit.SECONDS);
```

Как можно заметить аргументы не изменились с прошлого метода ==scheduleAtFixedRate==
То есть метод ==scheduleWithFixedDelay== принимает те же самые аргументы

Единственное отличие от scheduleAtFixedRate в том, как работает параметр ==period==

Пример: 

![[Pasted image 20240824135425.png]]

- Period в методе scheduleWithFixedDelay означает промежуток  между концом одного задания, и началом другого. То есть между заданиями всегда будет промежуток равный периоду 
