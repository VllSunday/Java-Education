---
создал заметку: 2024-08-21
---
Многопоточность - это принцип построения программы, при котором несколько блоков кода могут выполняться одновременно.

### Основные цели многопоточности

1) Производительность - скорость выполнения, важна но не так сильно как Cancurrency
2) Cancurrency - параллельность (выполнение сразу нескольких задач) 

### Контекстная Переключаемость (Context Switch)

Контекстная переключаемость происходит, когда операционная система (OS) переключается с одного потока выполнения на другой. Это может происходить по разным причинам, например, если один поток завершает своё выполнение или если система решает, что другой поток должен получить доступ к процессору. Переключение контекста включает в себя сохранение состояния текущего потока (например, регистров процессора) и восстановление состояния другого потока.

### Виртуальная Параллельность

Виртуальная параллельность — это иллюзия одновременного выполнения нескольких потоков на одном ядре процессора. Это достигается за счет быстрого переключения контекста между потоками, так что создается впечатление, что все потоки работают одновременно. В реальности, в каждый момент времени работает только один поток, но OS быстро переключает контекст между ними.

### Как Java Управляет Потоками

Java предоставляет высокоуровневые средства управления потоками, такие как создание, запуск, и синхронизация потоков, но **управление выполнением потоков** (например, какое ядро процессора использовать) действительно осуществляется JVM и операционной системой. JVM может создавать потоки и распределять их по ядрам, но как именно потоки распределяются между ядрами, решает OS.

Если у вас система с одним ядром, JVM и операционная система будут использовать контекстное переключение для создания иллюзии параллельного выполнения. Это то, что ты описал как "виртуальная параллельность". Все потоки будут поочередно получать доступ к единственному ядру процессора, и JVM/OS будут переключать контекст между ними, чтобы обеспечить выполнение всех задач.

### Управление Многопоточностью

На уровне кода, ты действительно управляешь многопоточностью: создаешь потоки, синхронизируешь их, задаешь приоритеты и т.д. Однако, распределение потоков по ядрам и решение о контекстной переключаемости остаются за JVM и операционной системой. Это дает возможность программистам писать код, который будет работать независимо от конкретного количества ядер процессора.

---
# Список тем

 - [[Варианты создания нового потока]]