---
создал заметку: 2024-09-10
---
### HTTP
HTTP (HyperText Transfer Protocol) - протокол передачи
произвольных данных прикладного уровня, который изначально
был предназначен для передачи только HTML (HyperText Markup
Language) документов

Протокол соответствует <font color="#ffff00">клиент-серверной</font> архитектуре, где
взаимодействие и клиента и <font color="#ffff00">веб-сервера</font> осуществляется по
стандартной схеме «request-response»

#### Что такое web-server? 
web-server - это обычное приложение, которое написано на (каком то языке программирования, в нашем случае) java, и который умеет обрабатывать HTTP запросы. То есть веб-сервер, потому что запросы на этот сервер приходят из сети


#### HTTP сообщение
Каждое НТТР-сообщение, независимо от того, следует оно от
клиенту к серверу (request) или от сервера клиенту (response),
состоит из трех основных частей :

<font color="#ffff00">1. Стартовая строка</font>
<font color="#ffff00">2. Заголовок (header)</font>
<font color="#ffff00">3. Тело сообщения (body)</font>
(на самом деле, это логическое разбиение, потому что все идет одним куском информации)

### Стартовая строка 
Стартовая строка определяет тип сообщения, в которой
указываются следующие данные (<font color="#ffff00">general</font>):
### A)
Request:
- метод (GET, POST, PUT, DELETE, etc)
- адрес (URL) // Кому мы отправляем запрос
- версия протокола (HTTP/1.1, HTTP/2)
GET  https://www.google.com/search?q=java  HTTP/2
POST  http://localhost:8080/import  HTTP/1.1
DELETE  http://example.org/users/1/images/4  HTTP/1.1


НТТР метод - это название операции, которая должна
быть выполнена HTTP запросом (request):
- GET- когда хотим получить информацию (дай информацию по этому пользователю)
- POST - когда мы хотим добавить какие то данные на сервер, или изменить там что-то
- PUT - когда мы хотим обновить уже существующую запись
- DELETE - когда хотим удалить 
- PATCH - когда хотим удалить часть информации, например, только несколько полей
- HEAD - тоже самое что и GET, только не содержит тело запроса
- CONNECT
- OPTIONS
- TRACE


### URL
Адрес (URL - Uniform Resource Locator) состоит из 4 основных частей:
- протокол
- доменное имя или IP адрес (с портом)
- адрес ресурса (по указанному доменному имени или IP адресу)
- список параметров
https://www.example.com:443/users/1?word=java&sourceid=chrome

https - протокол, более современны и защищенный чем http
www.example.com - доменное имя
443 - порт https (80 порт у http)
users/1 - адрес ресурса, который указывает какую информацию мы хотим получить от нашего сервера
?word=java&sourceid=chrome - (через ? знак идет) список параметров 
- Список параметров, очень легко устроен: идет ключ и через = значение
- Например: word=java
- Если нужно вставить следующее значение: word=java&sourseid=chrome
- Все эти параметры можно будет получить на стороне сервера.
- Так же можно перечислять разные параметры и разными значениями (что то типо списка)


### Response 
### B) 
Response:
- версия протокола (HTTP/1.1, HTTP/2)
- код состояния (1xx, 2xx, 3xx, 4xx, 5xx)
- текстовое пояснение
HTTP/2 200 OK
HTTP/1.1
HTTP/1.1
404 Not Found
500 Internal Server Error


### Код состояния 
Код состояния - (Status code) - цифровой код ответа сервера,
состоящий из трехзначного числа, первая цифра которого
означает класс состояния
Всего существует 5 классов состояния: 1xx, 2xx, 3xx, 4xx, 5xx
1XX - INFORMATIONAL
2XX - SUCCESS
3XX - REDIRECTION
4XX - CLIENT ERROR
5XX - SERVER ERROR
![[Pasted image 20240910185802.png]]


### 1хх - информация о состоянии процесса передачи
100 Continue
1011 Switching Protocols

1011 - например, когда мы хотим с http перейти на web-socket

### 2хх - информация об успешном принятии запроса и его обработке
200 OK
201 Created
204 No Content

Если мы сделали get все прошло нормально то будет 200 OK 

### 3хх - информация о том, что необходимо выполнить запрос по другому адресу, указанному в заголовке location (header)
301 Moved Permanently
302 Moved Temporarily
3XX - Redirection
То есть наш сервер не может сам обработать запрос, но он знает кто может это сделать


### 4хх - информация об ошибках со стороны клиента
401 Unauthorized
403 Forbidden
404 Not Found

Например, когда мы переходи на URL которого не существует то мы получим 404 ошибку

### 5хх - информация об ошибках на стороне сервера
500 Internal Server Error
503 Service Unavailable
504 Gateway Timeout


---
# Header

### Что такое HTTP заголовки (Headers)?

HTTP заголовки представляют собой ключевые элементы обмена данными в веб-протоколе HTTP, и они играют важную роль как в запросах клиента (например, браузера), так и в ответах сервера. Заголовки передают метаданные, которые помогают описывать или уточнять, как запрос или ответ должен обрабатываться.

Каждый заголовок состоит из **имени заголовка** и **значения**, разделенных двоеточием (`:`). Как ты уже заметил, названия заголовков нечувствительны к регистру, то есть можно использовать как прописные, так и строчные буквы.

### Основные категории заголовков

1. **Заголовки запроса (Request Headers)**:
   Они отправляются клиентом (например, браузером) к серверу и содержат информацию о клиенте, типа контента, который он хочет получить, а также прочие данные, которые могут помочь серверу ответить правильно.
   
   Примеры:
   - `Accept`: указывает тип данных, который клиент может обработать, например `text/html`, `application/json`.
   - `Authorization`: содержит данные для аутентификации пользователя.
   - `User-Agent`: идентифицирует клиентское приложение, например браузер или другую программу.
   - `Accept-Language`: указывает предпочтительный язык клиента для ответа.

2. **Заголовки ответа (Response Headers)**:
   Эти заголовки отправляются сервером обратно клиенту. Они содержат информацию о самом ответе, например, какой тип данных отправляется или инструкции для клиента, как обрабатывать этот ответ.
   
   Примеры:
   - `Content-Type`: тип содержимого, которое сервер возвращает (например, `application/json` или `text/html`).
   - `Set-Cookie`: устанавливает cookie на клиенте.
   - `Content-Length`: указывает размер тела ответа в байтах.
   - `Server`: описывает программное обеспечение, на котором работает сервер (например, `Apache` или `nginx`).

3. **Заголовки сущности (Entity Headers)**:
   Эти заголовки могут присутствовать как в запросах, так и в ответах, и описывают тело сообщения (например, размер данных или время их последнего изменения).
   
   Примеры:
   - `Content-Length`: длина тела запроса или ответа.
   - `Content-Type`: тип данных тела сообщения (например, `text/html`, `application/json`).
   - `Last-Modified`: указывает, когда ресурс в последний раз изменялся на сервере.

### Несколько популярных заголовков с объяснением:

1. **Authorization**
   - Используется для передачи данных аутентификации. Например, в случае с Basic Authentication, как в твоем примере:
     ```
     Authorization: Basic dXNlcjpwYXNzd29yZA==
     ```
     Здесь закодированные в base64 данные передают логин и пароль в формате `username:password`.

2. **Accept**
   - Этот заголовок сообщает серверу, какой тип контента ожидает клиент. Например:
     ```
     Accept: application/json
     ```
     Означает, что клиент хочет получить данные в формате JSON.

3. **Content-Type**
   - Этот заголовок используется как в запросах, так и в ответах для описания типа содержимого тела сообщения. Например:
     ```
     Content-Type: application/json
     ```
     Означает, что тело сообщения содержит JSON-данные.

4. **Cookie**
   - Передает cookie (небольшие данные, которые хранятся на клиенте) на сервер. Это может выглядеть так:
     ```
     Cookie: name1=value1; name2=value2;
     ```
     Сервер может использовать их для отслеживания состояния пользователя или сохранения его данных.

5. **User-Agent**
   - Этот заголовок идентифицирует клиентское приложение (например, браузер) и может содержать информацию о его версии и операционной системе:
     ```
     User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36
     ```
     Сервер может использовать эту информацию для оптимизации ответа под конкретный тип клиента.

### Особенности работы с заголовками

- **Безопасность:** Некоторые заголовки (например, `Authorization`) содержат чувствительную информацию, которую следует передавать только по защищенным каналам (например, через HTTPS).
- **Кэширование:** Заголовки, такие как `Cache-Control` или `Expires`, управляют кэшированием ресурсов на клиенте.
- **Пользовательские заголовки:** В некоторых случаях можно создать собственные заголовки, добавив префикс `X-`. Например, `X-Custom-Header`.

### Пример полного HTTP запроса

Пример, как это может выглядеть в реальном запросе:

```
GET /index.html HTTP/1.1
Host: www.example.com
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36
Accept: text/html
Accept-Language: en-US,en;q=0.9
Authorization: Basic dXNlcjpwYXNzd29yZA==
Cookie: sessionId=abc123
```

Этот запрос отправляет браузер клиенту, запрашивая страницу `index.html` с сайта `www.example.com`, а заголовки сообщают серверу, какой контент он ожидает и кто делает запрос (включая сессионные данные и авторизацию).

### Итог

HTTP заголовки — это ключевые элементы для передачи метаинформации о запросах и ответах. Они обеспечивают правильную интерпретацию и обработку данных как на стороне клиента, так и на стороне сервера.

---

# Тело

Тело сообщения (Body) - это непосредственно пересылаемые
данные НТТР сообщением.
Отделяется от заголовка (header) пустой строкой
Сами данные могут быть совершенно любые, например:
- HTML страницы
- JSON
{JSON}
- XML1
- Видео
- Картинки

### Структура HTTP сообщения

HTTP сообщение обычно состоит из трёх основных частей:

1. **Стартовая строка**: содержит информацию о запросе (например, тип запроса и URL) или ответе (например, статус код).
2. **Заголовки (Headers)**: они содержат метаданные о сообщении, например, тип контента или длину сообщения.
3. **Тело (Body)**: это данные, которые передаются с запросом или ответом (если тело вообще есть).

Между заголовками и телом сообщения действительно **идет пустая строка**, которая и отделяет заголовки от тела.

Пример базовой структуры HTTP запроса:

```
POST /submit HTTP/1.1        <-- стартовая строка
Host: www.example.com         <-- заголовки
Content-Type: application/json
Content-Length: 123

{                             
  "name": "John",             <-- тело (JSON данные)
  "age": 30
}
```

### Что такое тело (Body) HTTP сообщения?

**Тело (Body)** — это основная часть HTTP сообщения, которая может содержать любые данные, которые клиент или сервер хотят передать. Оно отделяется от заголовков **пустой строкой**. Формат тела сообщения определяется заголовком `Content-Type`, который сообщает, какого рода данные содержатся в теле.

Примеры данных, которые могут находиться в теле:
- **HTML** — когда загружается веб-страница.
- **JSON** — часто используется для передачи данных между клиентом и сервером, особенно в API.
- **XML** — формат данных, который также может использоваться для обмена структурированной информацией.
- **Файлы (изображения, видео и т.д.)** — могут быть переданы в теле сообщения.
  
### Пример HTTP сообщения с телом

1. **Пример POST запроса с JSON данными:**

```
POST /api/users HTTP/1.1
Host: api.example.com
Content-Type: application/json
Content-Length: 52

{
  "name": "Alice",
  "email": "alice@example.com"
}
```

В этом примере в теле сообщения передаются данные пользователя в формате JSON. Заголовок `Content-Type` указывает, что тело содержит JSON.

2. **Пример ответа с HTML содержимым:**

```
HTTP/1.1 200 OK
Content-Type: text/html
Content-Length: 138

<html>
  <head><title>Пример страницы</title></head>
  <body>
    <h1>Привет, мир!</h1>
  </body>
</html>
```

Здесь сервер отвечает с HTML-страницей. Заголовки указывают тип содержимого (HTML) и длину тела (138 байт).

### Форматы данных в теле

Данные в теле могут быть самыми разными:

- **Текстовые данные**:
  - HTML (`Content-Type: text/html`)
  - JSON (`Content-Type: application/json`)
  - XML (`Content-Type: application/xml`)

- **Мультимедийные данные**:
  - Изображения (`Content-Type: image/png`)
  - Видео (`Content-Type: video/mp4`)

- **Файлы**:
  - Для загрузки или передачи файлов может использоваться `Content-Type: multipart/form-data`.

### Отсутствие тела

Иногда тело сообщения может отсутствовать, например, в HTTP запросах типа `GET`. Эти запросы обычно только запрашивают информацию у сервера, и данные передаются через заголовки или параметры URL.

Пример `GET` запроса без тела:

```
GET /users HTTP/1.1
Host: www.example.com
```

### Итог

Ты прав в том, что тело сообщения отделяется от заголовков пустой строкой. Само тело может содержать различные типы данных, будь то текст, JSON, XML, файлы или мультимедиа, и формат тела зависит от заголовка `Content-Type`.

Если у тебя есть ещё вопросы по HTTP, не стесняйся спрашивать!

---

## Интересные моменты: 
C методом get не принято передавать body (хотя формат позволяет это делать!)
![[Pasted image 20240910195025.png]]