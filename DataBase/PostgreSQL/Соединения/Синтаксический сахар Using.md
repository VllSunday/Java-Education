---
создал заметку: 2024-08-10
---


---

# SQL `USING`

## Что такое `USING` в SQL?

`USING` — это конструкция в SQL, которая используется для упрощения синтаксиса соединений (`JOIN`). Она позволяет явно указать, какие столбцы должны быть использованы для объединения таблиц, и уменьшает количество повторений в запросе.

## Синтаксический сахар

- **Синтаксический сахар**: Это термин, используемый для описания синтаксических конструкций, которые делают код более читабельным или кратким, но не добавляют нового функционала. В данном случае, `USING` является синтаксическим сахаром, который упрощает написание `JOIN`-запросов.

## Как работает `USING`

Когда используются `USING`, SQL автоматически определяет, что столбцы с одинаковыми именами в обеих таблицах должны быть использованы для соединения. Это позволяет избежать повторного указания одинакового условия соединения в `ON`.

### Пример использования `USING`

Допустим, у нас есть две таблицы: `employees` и `departments`, которые имеют общий столбец `department_id`.

**Таблица `employees`**
| employee_id | name     | department_id |
|-------------|----------|---------------|
| 1           | Alice    | 10            |
| 2           | Bob      | 20            |
| 3           | Charlie  | 10            |

**Таблица `departments`**
| department_id | department_name |
|--------------|-----------------|
| 10           | Sales           |
| 20           | Marketing       |

Чтобы объединить эти таблицы по `department_id`, можно использовать `USING` следующим образом:

```sql
SELECT e.name, d.department_name
FROM employees e
JOIN departments d
USING (department_id);
```

Этот запрос соединяет таблицы `employees` и `departments` по столбцу `department_id`, который присутствует в обеих таблицах.

### Сравнение с `ON`

Аналогичный запрос с использованием `ON` выглядел бы так:

```sql
SELECT e.name, d.department_name
FROM employees e
JOIN departments d
ON e.department_id = d.department_id;
```

В этом запросе необходимо явно указывать условие соединения. В случае большого количества столбцов или сложных соединений, использование `USING` делает запрос более читаемым и кратким.

## Преимущества `USING`

1. **Упрощение синтаксиса**: Снижение повторений и упрощение написания запросов.
2. **Читаемость**: Более чистый и понятный код, особенно в запросах с несколькими объединениями.

## Ограничения

- **Имя столбца**: `USING` работает только если столбцы, используемые для соединения, имеют одинаковые имена в обеих таблицах. Если столбцы имеют разные имена, нужно использовать `ON`.
- **Множественные столбцы**: `USING` не поддерживает соединение по нескольким столбцам одновременно (в таких случаях следует использовать `ON`). 
---