---
создал заметку: 2024-08-07
---
### Foreign Key (внешний ключ)

1. **Связь между таблицами**: Foreign Key используется для установления и обеспечения связи между данными в двух таблицах.
2. **Ссылка на Primary Key**: Внешний ключ в одной таблице указывает на Primary Key в другой таблице, создавая связь между записями.
3. **Поддержка целостности данных**: Foreign Key помогает поддерживать целостность данных, гарантируя, что значения в столбце внешнего ключа существуют в связанной таблице (той, на которую ссылается внешний ключ).
4. **Может быть null**: В отличие от Primary Key, внешние ключи могут содержать null значения, если связь не обязательна.

```SQL
CREATE TABLE Orders (
    OrderID INT PRIMARY KEY,
    UserID INT,
    OrderDate DATE,
    FOREIGN KEY (UserID) REFERENCES Users(UserID)
);
```

Здесь `UserID` в таблице `Orders` является Foreign Key, который ссылается на `UserID` в таблице `Users`. Это значит, что каждое значение `UserID` в таблице `Orders` должно соответствовать значению `UserID` в таблице `Users`.


### Взаимодействие между Primary Key и Foreign Key

Представим, что у нас есть две таблицы: `Users` и `Orders`.

1. **Создание связи**: Таблица `Users` имеет Primary Key `UserID`. В таблице `Orders` есть столбец `UserID`, который является Foreign Key и ссылается на `UserID` в таблице `Users`. Таким образом, каждая запись в таблице `Orders` связана с пользователем из таблицы `Users`.
2. **Обеспечение целостности**: Если в таблице `Orders` добавляется запись с `UserID`, которого нет в таблице `Users`, то это приведет к ошибке, так как нарушается целостность данных.
3. **Обновление и удаление**: Если попытаться удалить запись из таблицы `Users`, которая используется в таблице `Orders` (например, если пользователь сделал заказы), то это приведет к ошибке, если не указано действие при удалении (`ON DELETE CASCADE`, `ON DELETE SET NULL` и т.д.).
Пример сценария:

1. В таблице `Users` у нас есть:
```Java
UserID | UserName
1      | Alice
2      | Bob
```

2) В таблице `Orders` у нас есть:
```Java
OrderID | UserID | OrderDate
1       | 1      | 2023-01-01
2       | 2      | 2023-01-02
```
1. Здесь `OrderID 1` ссылается на `UserID 1` (Alice), а `OrderID 2` ссылается на `UserID 2` (Bob).

Таким образом, Foreign Key обеспечивает ссылочную целостность между таблицами, указывая, что значения в одной таблице должны соответствовать значениям в другой таблице.
