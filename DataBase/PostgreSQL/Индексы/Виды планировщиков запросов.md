---
создал заметку: 2024-09-02
---
# Виды планировщиков запросов

## 1. Синтаксический планировщик (устаревший)
- Составляет план запроса, исходя из написанного SQL-кода.
- Не учитывает реальную производительность.
- Применялся в ранних версиях СУБД, сейчас не используется.

## 2. Стоимостной планировщик (Cost-Based Optimizer, CBO)
- Вычисляет оптимальный план запроса на основе оценки стоимости различных способов выполнения запроса.
- Оценка стоимости включает:
  - **`page_cost`** (стоимость страницы)
  - **`cpu_cost`** (стоимость процессора)

### Стоимость

- **`page_cost`**:
  - Оценивает затраты на операции ввода-вывода (I/O) для чтения данных.
  - В примере: `1.0` — стоимость чтения одной страницы данных.
  
- **`cpu_cost`**:
  - Оценивает затраты на процессорное время для выполнения операций, таких как фильтрация строк.
  - В примере: `0.01` — стоимость обработки одной строки данных.

### Пример расчёта

- **`page_cost`:**
  - Если необходимо прочитать 1 страницу, стоимость будет `1 * 1.0 = 1.0`.

- **`cpu_cost`:**
  - Если процессору нужно обработать 55 строк, стоимость будет `55 * 0.01 = 0.55`.

- **Общая стоимость запроса:**
  - Сумма `page_cost` и `cpu_cost`: `1.0 (page_cost) + 0.55 (cpu_cost) = 1.55`.

### Вопрос по `0.01`
- `0.01` — коэффициент стоимости процессорного времени на одну строку данных.
- Этот коэффициент зависит от конфигурации СУБД и может варьироваться.



Что делает на Nested Loop? Он просто идет по просканированной таблице циклом. 
И сапоставлеет данные из 2х таблиц по порядку.
То есть взял 1 строку, и используя индекс связал по Index Condition 


Nested loop не эфективен когда становиться много данных.
Тогда в место него используется hash join






