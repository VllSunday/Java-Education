---
создал заметку: 2024-08-09
---
Вот конспект на русском языке, оформленный для использования в Obsidian:

---

## PostgreSQL LIKE

### Введение в оператор PostgreSQL LIKE
Оператор PostgreSQL `LIKE` используется для поиска данных на основе шаблонов. Например, если нужно найти клиентов, чьи имена начинаются на "Jen", но точное имя не помнится, можно использовать оператор `LIKE` для поиска подходящих записей.

![[PlaysholdersLike.png]]

**Пример запроса:**
```sql
SELECT 
  first_name, 
  last_name 
FROM 
  customer 
WHERE 
  first_name LIKE 'Jen%';
```
Этот запрос вернет строки, где значения в столбце `first_name` начинаются с "Jen", за которым могут следовать любые символы. Такой подход называется сопоставлением с шаблоном.

### Основные символы-заменители (wildcards) в PostgreSQL:
- **%** — соответствует любой последовательности из нуля и более символов.
- **_** — соответствует любому одному символу.

### Синтаксис оператора LIKE:
```sql
value LIKE pattern
```
Оператор `LIKE` возвращает `true`, если значение соответствует шаблону. Для отрицания можно использовать оператор `NOT LIKE`:
```sql
value NOT LIKE pattern
```
Если в шаблоне отсутствуют символы-заменители, оператор `LIKE` работает как оператор равенства (`=`).

### Примеры использования оператора PostgreSQL LIKE

1) **Пример базового использования LIKE:**
```sql
SELECT 'Apple' LIKE 'Apple' AS result;
```
Этот запрос возвращает `true`, так как строка `'Apple'` соответствует шаблону `'Apple'`.

2) **Поиск строк, начинающихся с определенной буквы:**
```sql
SELECT 'Apple' LIKE 'A%' AS result;
```
Возвращает `true`, так как строка `'Apple'` начинается с буквы `A`.

3) **Использование LIKE с данными таблицы:**
```sql
SELECT 
  first_name, 
  last_name 
FROM 
  customer 
WHERE 
  first_name LIKE '%er%' 
ORDER BY 
  first_name;
```
Этот запрос находит клиентов, чьи имена содержат строку `'er'`.

4) **Использование LIKE с шаблоном, содержащим оба символа-заменителя:**
```sql
SELECT 
  first_name, 
  last_name 
FROM 
  customer 
WHERE 
  first_name LIKE '_her%' 
ORDER BY 
  first_name;
```
Шаблон `_her%` находит строки, где:
- Первый символ может быть любым.
- Следующие символы должны быть `'her'`.
- После `'her'` может быть любая последовательность символов.

### Примеры использования PostgreSQL NOT LIKE

**Пример запроса с NOT LIKE:**
```sql
SELECT 
  first_name, 
  last_name 
FROM 
  customer 
WHERE 
  first_name NOT LIKE 'Jen%' 
ORDER BY 
  first_name;
```
Этот запрос находит клиентов, чьи имена **не** начинаются с `'Jen'`.

### Дополнения PostgreSQL к оператору LIKE

#### Оператор ILIKE
ILIKE — это аналог оператора `LIKE`, но нечувствительный к регистру:
```sql
SELECT 
  first_name, 
  last_name 
FROM 
  customer 
WHERE 
  first_name ILIKE 'BAR%';
```
Этот запрос найдет строки, начинающиеся с `'BAR'`, `'Bar'`, `'BaR'` и т.д.

#### Сопоставление операторов PostgreSQL:
- `~~` — аналог `LIKE`
- `~~*` — аналог `ILIKE`
- `!~~` — аналог `NOT LIKE`
- `!~~*` — аналог `NOT ILIKE`

**Пример использования оператора `~~`:**
```sql
SELECT 
  first_name, 
  last_name 
FROM 
  customer 
WHERE 
  first_name ~~ 'Dar%' 
ORDER BY 
  first_name;
```
Этот запрос находит строки, чьи имена начинаются на `'Dar'`.

### Оператор LIKE с опцией ESCAPE
Если данные содержат символы `%` или `_`, их можно использовать как обычные символы, добавив опцию `ESCAPE`:
```sql
SELECT * FROM t 
WHERE message LIKE '%10$%%' ESCAPE '$';
```
В данном случае символ `$` используется для указания, что `%` следует интерпретировать как обычный символ.

### Выводы:
- Используйте оператор `LIKE` для поиска данных по шаблону.
- Используйте `NOT LIKE` для отрицания.
- Символ `%` — для совпадения с любой последовательностью символов.
- Символ `_` — для совпадения с одним символом.
- Используйте опцию `ESCAPE`, чтобы указать символ экранирования.
- Используйте `ILIKE` для нечувствительного к регистру поиска.

---

Такой формат должен отлично подойти для работы в Obsidian!  