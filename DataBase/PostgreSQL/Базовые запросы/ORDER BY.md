---
создал заметку: 2024-08-08
---
### Оператор `ORDER BY` в SQL

Оператор `ORDER BY` используется для сортировки результатов запроса в SQL. Он позволяет упорядочить строки по значениям одного или нескольких столбцов в порядке возрастания (`ASC`) или убывания (`DESC`).

#### Основной синтаксис

```SQL 
SELECT column1, column2, ...
FROM table_name
ORDER BY column1 [ASC|DESC], column2 [ASC|DESC], ...;

```

- **column1, column2, ...** — столбцы, по которым будет происходить сортировка.
- **ASC** (Ascending) — сортировка в порядке возрастания (по умолчанию).
- **DESC** (Descending) — сортировка в порядке убывания.

### Примеры использования

#### 1. Сортировка по одному столбцу

```SQL
SELECT first_name, last_name
FROM employees
ORDER BY last_name ASC;
```

Этот запрос отсортирует результаты по фамилиям сотрудников (`last_name`) в алфавитном порядке (по возрастанию).

#### 2. Сортировка по одному столбцу в порядке убывания

```SQL
SELECT first_name, last_name, salary
FROM employees
ORDER BY salary DESC;
```


Этот запрос отсортирует сотрудников по зарплате (`salary`) в порядке убывания — от самой высокой к самой низкой.

#### 3. Сортировка по нескольким столбцам

```SQL

SELECT first_name, last_name, department
FROM employees
ORDER BY department ASC, last_name ASC;

```

Здесь сотрудники будут отсортированы сначала по департаменту в алфавитном порядке, а затем по зарплате в порядке убывания внутри каждого департамента.

### Сортировка по порядковым номерам столбцов

SQL позволяет использовать номера столбцов, указанных в `SELECT`, для сортировки:

```SQL 

SELECT first_name, last_name, salary
FROM employees
ORDER BY 2 ASC, 3 DESC;

```


Этот запрос отсортирует результаты по второму столбцу (`last_name`) в алфавитном порядке и по третьему столбцу (`salary`) в порядке убывания. Однако использование номеров столбцов не рекомендуется, так как это может снизить читаемость кода.

### Особенности и нюансы

1. **Сортировка по `NULL` значениям:**
    
    - В большинстве баз данных `NULL` значения при сортировке по возрастанию (`ASC`) отображаются первыми, а при сортировке по убыванию (`DESC`) — последними. Но поведение может варьироваться в зависимости от СУБД.
2. **Сортировка с использованием выражений:**
    
    - Можно сортировать по выражениям, а не только по столбцам. Например:
```SQL

SELECT first_name, last_name, salary, (salary * 0.1) AS bonus
FROM employees
ORDER BY bonus DESC;

```

1. Здесь сортировка будет происходить по рассчитанному бонусу (`bonus`), который не является столбцом таблицы, а вычисляется в запросе.
    
2. **Сортировка и производительность:**
    
    - Сортировка может быть ресурсоемкой операцией, особенно при больших объемах данных. Убедись, что для столбцов, по которым часто происходит сортировка, есть индексы для улучшения производительности.


## Важный момент: 
Алиасы (псевдонимы) доступны только после выполнения `SELECT`, т.е. на этапе `ORDER BY`.

### Заключение

Оператор `ORDER BY` в SQL — мощный инструмент для упорядочивания результатов запроса. Он позволяет гибко сортировать данные по одному или нескольким столбцам, как в порядке возрастания, так и в порядке убывания. Грамотное использование `ORDER BY` помогает не только улучшить читаемость и восприятие данных, но и оптимизировать запросы в сложных базах данных.