---
создал заметку: 2024-09-03
---
2 способа реализации репликации

### Master - Slave 
![[Pasted image 20240903150306.png]]
В случае с Master - Slave
Master - узел который принимает все запросы на изменения (и SELECT тоже)
Slave - принимаю запрос только на чтение

То есть все изменения происходят в Master узле. Затем Master синхронно или асинхронно передает эти апдейты (SQL коман


### Master - Master
![[Pasted image 20240903151100.png]]

В случае с Master - Master
Каждая из реплик, самостоятельная, она полностью обрабатывает все запросы, на чтение и изменение. Естественно в таком случае усложняется синхронизация между Master-ами  


###### На практике чаще всего используют Mater - Slave в виду его простаты

### Sharding (Шардирование)
#Sharding

- Фрагментация или сегментация (Sharding) баз данных - это
  процесс разбиения одной большой базы данных на несколько
  более мелких автономных разделов

- Каждый раздел имеет одинаковую схему и столбцы, но разные строки

- Соответственно, данные, хранящиеся в каждом из них, уникальны
  и не зависят от данных, хранящихся в других разделах

Так же мы можем соединять Sharding & Replication
![[Pasted image 20240903153011.png]]

Еще такое базы данных называются распределенными: 

<font color="#00b050">Распределенная база</font> данных (distributed database) - база данных,
составные части которой размещаются в различных узлах компьютерной
сети в соответствии с каким-либо критерием

Но с распределенными базами данных есть не мало проблем. Для описания этих проблем существует теорема: <font color="#00b050">Теорема CAP </font>


Теорема САP - это теорема, утверждающая, что при разработке
распределённой системы (базы данных) вы не можете достичь
одновременно трёх свойств: согласованность (consistency),
доступность (availability) и терпимость к разделению сети
(partition tolerance)

Вы можете выбрать только два из трех,
но никак не все сразу для своей
распределенной базы данных


C (consistency) - согласованность.
Каждое чтение дает нам самую последнюю запись

A (availability) - доступность.
Система всегда успешно выполняет запросы (на чтение и
запись), даже если имеются упавшие (неработающие) узлы
P (partition tolerance) - устойчивость к разделению.
Даже если между узлами пропала связь, они продолжают
работать независимо друг от друга и выполнять запросы

## Важно знать
Что реляционные базы данных не предназначены для работы в распределенных системах
Хотя все современные БД могут предоставить такую возможность

### NoSQL
(нереляционные базы данных) - базы данных, специально
предназначенные для работы в распределенных системах, т.е. с
большим объемом данных, не помещающимся на один узел

### Основные типы NoSQL
БД на основе пар ключ значение «key-value» (Cassandra)
Документо-ориентированные БД (MongoDB)
Графовые БД (Neo4j)
БД в памяти «in-memorу» (Apache Ignite)
Поисковые БД (Elasticsearch)