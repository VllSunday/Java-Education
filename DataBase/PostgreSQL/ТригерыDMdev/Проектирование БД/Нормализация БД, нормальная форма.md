---
создал заметку: 2024-08-11
---

Нормальная форма (НФ) - свойство отношения,
характеризующее его с точки зрения избыточности

Нормализация - процесс минимизации
избыточности отношения (приведение к НФ)

Нормальная форма и процесс нормализации позволяют устранить дубликаты

Если говорить простым языком, это разделение больших таблиц на маленькие


# Нормальные формы

### Первая нормальная форма (1НФ) 
У первой нормальной формы к отношению есть три требования: 
- Нет строк-дубликатов
- Все атрибуты простых типов данных
- Все значения скалярные

Разберем пример: 
![[Pasted image 20240811172703.png]]

По 1-му пункту мы проходим, в таблице нет дубликатов

По 2-му пункту мы не проходим, в таблице присутствуют сложные типы (массивы данных)

По 3-му пункту не проходим, потому что в ячейках не одно значение, а множество значений

###### - Как на этом пример достичь 1НФ?

![[Pasted image 20240811173107.png]]

### Вторая нормальная форма (2НФ)

У второй нормальной формы к отношению есть три требования: 

- Таблица удовлетворяет 1НФ
- Есть первичный ключ
- Все атрибуты (поля) описывают
	первичный ключ целиком, а не лишь его часть


![[Pasted image 20240811183049.png]]


![[Pasted image 20240811183135.png]]


### Третья нормальная форма (2НФ)

У третьей нормальной формы к отношению есть три требования:

- Таблица удовлетворяет 2НФ
- Нет зависимостей одних не ключевых атрибутов от других
(все атрибуты зависят только от первичного ключа)


Если в первой нормальной форме наше внимание было нацелено на соблюдение реляционных принципов, во второй нормальной форме в центре нашего внимания был первичный ключ, то в третьей нормальной форме все наше внимание уделено столбцам, которые не являются первичным ключом, т.е. неключевым столбцам.

Чтобы нормализовать базу данных до третьей нормальной формы, необходимо сделать так, чтобы в таблицах отсутствовали неключевые столбцы, которые зависят от других неключевых столбцов.

Иными словами, неключевые столбцы не должны пытаться играть роль ключа в таблице, т.е. они действительно должны быть неключевыми столбцами, такие столбцы не дают возможности получить данные из других столбцов, они дают возможность посмотреть на информацию, которая в них содержится, так как в этом их назначение.

Главное правило третьей нормальной форме (3NF) звучит следующим образом:

==Таблица должна содержать правильные неключевые столбцы==


Таблица сотрудников во второй нормальной форме: 

| **Табельный номер** | **ФИО**      | **Должность** | **Подразделение** | **Описание подразделения**                                                     |
| ------------------- | ------------ | ------------- | ----------------- | ------------------------------------------------------------------------------ |
| 1                   | Иванов И.И.  | Программист   | Отдел разработки  | Разработка и сопровождение приложений и сайтов                                 |
| 2                   | Сергеев С.С. | Бухгалтер     | Бухгалтерия       | Ведение бухгалтерского и налогового учета финансово-хозяйственной деятельности |
| 3                   | John Smith   | Продавец      | Отдел реализации  | Организация сбыта продукции                                                    |

## Почему эта таблица не соответствует 3НФ?

Столбец _«Описание подразделения»_ не зависит напрямую от первичного ключа. Мы это выяснили, когда задали себе один вопрос _«Каким образом описание подразделения связано с сотрудником?»._ И наш ответ звучит следующим образом: _«Атрибут описание подразделения содержит детальные сведения того подразделения, в котором работает сотрудник»_.

Отсюда следует, что столбец _«Описание подразделения»_ не связан на прямую с сотрудником, он связан напрямую со столбцом _«Подразделение»_, который напрямую связан с сотрудником, ведь сотрудник работает в каком-то конкретном подразделении. Это и есть транзитивная зависимость, когда один неключевой столбец связан с первичным ключом через другой неключевой столбец.

Чтобы привести эту таблицу к третьей нормальной форме, мы должны сделать что? Правильно, декомпозицию!

Мы должны эту таблицу разбить на две: в первой хранить сотрудников, а во второй подразделения. А для реализации связи в таблице сотрудников создать ссылку на таблицу подразделений, т.е. добавить внешний ключ.

Таблица сотрудников в третьей нормальной форме.

| **Табельный номер** | **ФИО**      | **Должность** | **Подразделение** |
| ------------------- | ------------ | ------------- | ----------------- |
| 1                   | Иванов И.И.  | Программист   | 1                 |
| 2                   | Сергеев С.С. | Бухгалтер     | 2                 |
| 3                   | John Smith   | Продавец      | 3                 |

_Таблица подразделений в третьей нормальной форме._

| **Идентификатор подразделения** | **Подразделение** | **Описание подразделения**                                                     |
| ------------------------------- | ----------------- | ------------------------------------------------------------------------------ |
| 1                               | Отдел разработки  | Разработка и сопровождение приложений и сайтов                                 |
| 2                               | Бухгалтерия       | Ведение бухгалтерского и налогового учета финансово-хозяйственной деятельности |
| 3                               | Отдел реализации  | Организация сбыта продукции                                                    |
Таким образом, в наших таблицах отсутствует транзитивная зависимость, и они находятся в третьей нормальной форме.

