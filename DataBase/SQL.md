---
создал заметку: 2024-08-06
---
SQL - не процедурный язык и не язык общего назначения (то есть на нем нельзя напасать (#игру) хотя и некоторые процедурные инструменты в этом языке все же есть)


Терминология: 
- Сущность - например, клиенты, заказы,
	поставщики
- Таблица - отношение
- Столбец - атрибут
- Строка / запись - кортеж
- Результирующий набор -
	результат запроса SQL:
	SELECT contact_name, address, city
	FROM customers
	LIMIT 13

Большинство различий,  между всему СУБД касаются процедурных расширений: PL/pgSQL  в PostgreSQL, PL/SQL в ORACLE, T-SQL в MS SQL 

Язык SQL делится на несколько категорий запросов. Вот команды, которые относятся к каждому из этих разделов:
### 1. DDL (Data Definition Language - язык определения данных)

DDL команды связаны с созданием, изменением и удалением **объектов базы данных**. К объектам базы данных относятся таблицы, индексы, представления, схемы и другие структуры. Основная цель DDL команд - определение и изменение структуры базы данных.

Примеры объектов, с которыми работает DDL:

- Таблицы (Tables)
- Индексы (Indexes)
- Представления (Views)
- Схемы (Schemas)

Основные команды DDL:

- **CREATE** - создание объектов
- **ALTER** - изменение объектов
- **DROP** - удаление объектов

Пример:
```SQL
CREATE TABLE employees (
    id INT PRIMARY KEY,
    name VARCHAR(100),
    position VARCHAR(100)
);

ALTER TABLE employees ADD COLUMN salary DECIMAL(10, 2);

DROP TABLE employees;

```

### DML (Data Manipulation Language)

DML команды связаны с управлением данными внутри **таблиц**. Эти команды используются для выборки, вставки, обновления и удаления данных, которые уже находятся в таблицах. Основная цель DML команд - манипулирование данными.

Основные команды DML:

- **SELECT** - выборка данных
- **INSERT** - вставка новых данных
- **UPDATE** - обновление существующих данных
- **DELETE** - удаление данных

Итак, основное различие:

- **DDL** команды управляют **структурой** базы данных и объектами базы данных.
- **DML** команды управляют **данными** внутри этих объектов, в первую очередь внутри таблиц.

Пример:
```SQL
INSERT INTO employees (id, name, position, salary) VALUES (1, 'John Doe', 'Manager', 50000);

SELECT * FROM employees;

UPDATE employees SET salary = 55000 WHERE id = 1;

DELETE FROM employees WHERE id = 1;

```

### 3. DCL (Data Control Language - язык управления доступом к данным)

Команды DCL используются для управления доступом к данным в базе данных, включая предоставление и отзыв прав доступа.

- **GRANT** - предоставление прав доступа
- **REVOKE** - отзыв прав доступа
- DENY 

Пример:
```SQL
GRANT SELECT, INSERT ON employees TO user_name;

REVOKE INSERT ON employees FROM user_name;
```

### 4. TCL (Transaction Control Language - язык управления транзакциями)

Транзакция - это достаточно продвинутое понятие в субд.
Транзакции позволяют нам рассматривать целый набор команд 
как единое не (делимое) целое.

И если вдруг на каком то этапе исполнения n-го кол-во команд происходит ошибка. Транзакции дают нам возможность полностью откатить к исходному виду. Таким образом, это механизм который обеспечивает целостность денных. Например мы хотим обновить базу данных. Но во время обновления произошла (какая то) ошибка и данные обновились не полностью. Для таких случаев и нужен TCL 

Команды TCL используются для управления транзакциями в базе данных, такие как фиксация или откат транзакций.

- **COMMIT** - фиксация транзакции
- **ROLLBACK** - откат транзакции
- **SAVEPOINT** - установка точки сохранения внутри транзакции
- **SET TRANSACTION** - установка параметров транзакции

Пример:
```SQL
BEGIN TRANSACTION;

INSERT INTO employees (id, name, position, salary) VALUES (2, 'Jane Doe', 'Developer', 60000);

COMMIT;

-- or to rollback the changes
ROLLBACK;

-- or to create savepoints
SAVEPOINT sp1;

-- to rollback to the savepoint
ROLLBACK TO sp1;
```

Эти команды позволяют более эффективно управлять данными и структурами базы данных, а также обеспечивать безопасность и целостность данных.